<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=EmulateIE8"/>
  <title>AAPL vs. GOOG</title>
  <script src="http://code.jquery.com/jquery-1.11.2.min.js"></script>
  <script src="js/config.js"></script>
  <script src="js/util.js"></script>
  <script src="js/interface.js"></script>
  <script src="js/ai.js"></script>
  <script src="js/class.js"></script>
  <script src="js/timer.js"></script>
  <script src="js/map.js"></script>
  <script src="js/main.js"></script>
  <script src="js/game.js"></script>
  <link rel="stylesheet" type="text/css" href="main.css">
  <!-- Latest compiled and minified CSS -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/css/bootstrap.min.css">
</head>
<body>

<!--Google Analytics-->
<!--<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-23019343-9']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>-->
<div class="container">
    <div class="jumbotron">
    <h2>AAPL vs. GOOG</h2>
    <p>See AAPL fights GOOG in classic Street Fighter game! The more bullish stock has a higher possibility to make the right move.</p>
    </div>

  <div class="row">
    <div class="col-lg-3" align="right">
      <div>Bid Price:</div>
      <div>Change:</div>
      <div>Change in percent:</div>
      <div>Wins:</div>
    </div>
    <div class="col-lg-3" align="right">
      <div id='AAPL_quote'></div>
      <div id='AAPL_change'></div>
      <div id='AAPL_per'></div>
      <div><input id='AAPL_win' type='text' value="0"/></div>
    <div>Draw Game: <input id='draw' type='text' value="0"/></div>
    </div>
    <div class="col-lg-6">
      <div id='GOOG_quote'></div>
      <div id='GOOG_change'></div>
      <div id='GOOG_per'></div>
      <div><input id='GOOG_win' type='text' value="0"/></div>
    <button type="submit" onClick="test();">Get Data</button>
    </div>
  </div>

<!--<div id="wrap" style="position: relative; left: 449px; top: 20px; overflow: hidden;">-->
  <div class="row">
<div id="wrap">
<canvas id="canvas"/></canvas>
</div>
</div>
<script>
$(document).ready(setInterval(getData,2000));
getData();

function getData() {
    var url = "http://query.yahooapis.com/v1/public/yql";
    var data = encodeURIComponent("select * from yahoo.finance.quotes where symbol in ('AAPL', 'GOOG')");

    $.getJSON(url, 'q=' + data + "&format=json&env=http://datatables.org/alltables.env")
      .done(function (data) {
        $("#AAPL_quote").text(data.query.results.quote[0].LastTradePriceOnly);
        $("#AAPL_change").text(data.query.results.quote[0].ChangeRealtime);
        $("#AAPL_per").text(data.query.results.quote[0].PercentChange);
        $("#GOOG_quote").text(data.query.results.quote[1].LastTradePriceOnly);
        $("#GOOG_change").text(data.query.results.quote[1].ChangeRealtime);
        $("#GOOG_per").text(data.query.results.quote[1].PercentChange);
        var e = $.Event("quote",{AAPL: data.query.results.quote[0].ChangeinPercent, GOOG:data.query.results.quote[1].ChangeinPercent});
        $('body').trigger(e);
    })
      .fail(function (jqxhr, textStatus, error) {
        var err = textStatus + ", " + error;
        $("#result").text('Request failed: ' + err);
        $("#result2").text('Request failed: ' + err);
    });
}

function getHistData() {
    var url = "http://query.yahooapis.com/v1/public/yql";
    var data = encodeURIComponent("select * from yahoo.finance.quotes where symbol in ('AAPL', 'GOOG')");

    $.getJSON(url, 'q=' + data + "&format=json&diagnostics=true&env=http://datatables.org/alltables.env")
      .done(function (data) {
        $("#result").text("Bid Price: " + data.query.results.quote[0].LastTradePriceOnly + " Change: " + data.query.results.quote[0].Change);
        $("#result2").text("Bid Price: " + data.query.results.quote[1].LastTradePriceOnly + " Change: " + data.query.results.quote[1].Change);
    })
      .fail(function (jqxhr, textStatus, error) {
        var err = textStatus + ", " + error;
        $("#result").text('Request failed: ' + err);
        $("#result2").text('Request failed: ' + err);
    });
}

</script>
</div>
</body>


